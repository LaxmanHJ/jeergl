<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bing Image of the Day</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: sans-serif; text-align: center; }
        .content-wrapper { padding-top: 100px; max-width: 1200px; margin: 0 auto; padding-left: 20px; padding-right: 20px; }
        img { 
            max-width: 100%;
            width: auto;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transition: transform 0.3s ease;
            margin: 2rem auto;
            display: block;
            max-height: 80vh;
            object-fit: contain;
        }
        img:hover {
            transform: scale(1.02);
        }
        html { scroll-behavior: smooth; }
        .glass { background-color: rgba(255,255,255,0.6); backdrop-filter: blur(6px); }
        a { transition: all .2s ease-in-out; text-decoration: none; font-weight: 700; color: inherit; }
        h1 { font-size: 2.5rem; font-weight: bold; margin-bottom: 1rem; }
        h2 { font-size: 1.5rem; margin-bottom: 2rem; }
        #copyright { 
            font-size: 0.9rem;
            color: #666;
            max-width: 800px;
            margin: 1.5rem auto;
            line-height: 1.5;
        }
    </style>
</head>
<body class="antialiased text-slate-900 bg-white">
    <!-- NAV -->
    <header class="fixed w-full top-0 z-50 glass border-b border-slate-200">
        <nav class="max-w-6xl mx-auto px-6 md:px-8 py-3 flex items-center justify-between">
            <div class="hidden md:flex items-center gap-6 text-sm">
                <a href="/#about" class="hover:underline">About</a>
                <a href="/#projects" class="hover:underline">Projects</a>
                <a href="/potd" class="hover:underline">Image of the Day</a>
                <a href="https://drive.google.com/file/d/1vngfTrHLhgESuezHuR_WwV7f3eMh2VPy/view?usp=drive_link" class="px-3 py-1 border rounded-md">Resume</a>
            </div>
            <div class="hidden md:flex items-right gap-6 text-sm">
                <a href="/papershelf" class="px-4 py-2 rounded-md inline-block bg-slate-900 text-white">Research Papers</a>
            </div>
            <button id="mobileBtn" class="md:hidden p-2 inline-flex items-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
            </button>
        </nav>
    </header>

    <div class="content-wrapper">
        <h2 class="text-2xl font-semibold">Image of the Day</h2>
        <h2 id="title">Loading...</h2>
        <img id="bing-image" alt="Bing Image of the Day">
        <p id="copyright"></p>
    </div>

    <script>
        // Define the base URLs
        const CORS_PROXY = "https://api.allorigins.win/raw?url=";
        const BING_API_URL = CORS_PROXY + encodeURIComponent("https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US");
        const BING_BASE_URL = "https://www.bing.com";

        /**
         * Fetches and displays the Bing Image of the Day
         */
        async function getBingImage() {
            try {
                // Step 1: Fetch the metadata from the API
                const response = await fetch(BING_API_URL);
                if (!response.ok) {
                    throw new Error(`Network response was not ok: ${response.statusText}`);
                }
                const data = await response.json();

                // Step 2: Extract the information
                const image = data.images[0];
                const imageUrl = BING_BASE_URL + image.url;
                const imageTitle = image.title;
                const imageCopyright = image.copyright;

                // Step 3: Display the image and its details on the page
                document.getElementById("title").innerText = imageTitle;
                document.getElementById("copyright").innerText = imageCopyright;
                
                const imgElement = document.getElementById("bing-image");
                imgElement.src = imageUrl;
                imgElement.alt = imageTitle;

            } catch (error) {
                // Handle any errors that occurred during the fetch
                console.error("Error fetching Bing image:", error);
                document.getElementById("title").innerText = "Failed to load image";
                document.getElementById("copyright").innerText = error.message;
            }
        }

        // Run the function when the page loads
        getBingImage();
    </script>

</body>
</html>